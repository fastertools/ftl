# Codecov configuration for CI/CD coverage reporting
# This file is used by services like codecov.io, coveralls.io, etc.

coverage:
  status:
    project:
      default:
        # Fail the status if coverage drops by more than 1%
        threshold: 1%
        target: 75%  # We're aiming for 75%+ coverage (excluding test files)
    patch:
      default:
        # New code should have at least 75% coverage
        target: 75%

ignore:
  # Infrastructure and hard-to-test files
  - "src/main.rs"       # CLI entry point, mostly argument parsing
  - "src/deps.rs"       # Testing infrastructure (DI traits)
  - "src/ui.rs"         # Interactive UI components
  - "src/api_client.rs" # Thin wrapper around auto-generated API client
  - "**/tests/**"       # Component test files
  - "**/e2e-tests/**"   # End-to-end test files
  - "**/*_test.rs"      # Test files
  - "**/*_tests.rs"     # Test files
  - "**/test_*.rs"      # Test helper files

comment:
  layout: "reach,diff,flags,tree"
  behavior: default
  require_changes: false